#!/bin/sh

report() {
    git ls-files | xargs grep -n "\s$1:\s*" | sed "s/^\(.*\):\(.*\):.*\s$1:\s*\(.*\)*$/\|\*\*$1\*\*\|\`\1\`\|\3\|[#]\(\/\1#L\2\)|/" | sed "s/\s*\*\///" | sort
}


echo "# Report"
echo "*Autogenerated by \`extra/utils/gen-report\`*"
echo "| Type | Filename | Message | Link |"
echo "| ---: | -------- | ------- | ---: |"

report "BUG"    2> /dev/null
report "FIXME"  2> /dev/null
report "HACK"   2> /dev/null
report "TODO"   2> /dev/null

